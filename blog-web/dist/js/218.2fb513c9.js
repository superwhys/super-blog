"use strict";(self["webpackChunksuperBlog"]=self["webpackChunksuperBlog"]||[]).push([[218],{2597:function(t,e,i){i.d(e,{Z:function(){return h}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"baseRight"},[e("router-link",{staticClass:"baseRightTitle",attrs:{to:t.toEndPoint}},[t._t("rightModuleTitle")],2),e("div",{staticClass:"baseRightMain"},[t._t("rightModuleMain")],2)],1)},s=[],o={name:"baseMainRightModule",props:{toEndPoint:{type:String,default:"#"}}},l=o,a=i(1001),r=(0,a.Z)(l,n,s,!1,null,"b040862c",null),h=r.exports},6356:function(t,e,i){i.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tagsModule"},[e("base-main-right-module",{attrs:{"to-end-point":"/tag"},scopedSlots:t._u([{key:"rightModuleTitle",fn:function(){return[t._v(" FEATURED TAGS ")]},proxy:!0},{key:"rightModuleMain",fn:function(){return[e("all-tags-module")]},proxy:!0}])})],1)},s=[],o=i(2428),l=i(2597),a=i(535),r={name:"tagsModule",components:{AllTagsModule:a.Z,BaseMainRightModule:l.Z,TagItem:o.Z}},h=r,d=i(1001),u=(0,d.Z)(h,n,s,!1,null,"774ab97b",null),c=u.exports},7379:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"postPage"},[e("base-page",{scopedSlots:t._u([{key:"blogHeaderImgInnerShow",fn:function(){return[e("div",{staticClass:"imgTitle"},[t._v(" "+t._s(t.postItem.title)+" ")]),e("div",{staticClass:"imgTag"},t._l(t.postItem.metaData.tags,(function(t){return e("tag-item",{key:t,staticStyle:{"margin-left":"5px",color:"white"},attrs:{text:t,"to-end-point":"/tag/"+t}})})),1)]},proxy:!0},{key:"blogLeftMainShow",fn:function(){return[e("v-md-preview",{ref:"preview",staticStyle:{"text-align":"left"},attrs:{text:t.postItem.postContent}}),e("tags-module")]},proxy:!0},{key:"blogRightMainShow",fn:function(){return[e("div",{staticClass:"anchor"},[e("div",{staticStyle:{"text-align":"left","font-size":"20px","font-weight":"bold","padding-bottom":"15px"}},[t._v(" - CATALOG ")]),t._l(t.titles,(function(i){return e("div",{staticClass:"anchorItem",class:{highlight:i.highlight},style:{padding:`5px 0 10px ${20*i.indent}px`},on:{click:function(e){return t.handleAnchorClick(i)}}},[e("a",{staticStyle:{cursor:"pointer"}},[t._v(t._s(i.title))])])}))],2)]},proxy:!0}])})],1)},s=[],o=i(9919),l=i(4190);function a(t,e,i,n){return(0,l.W)({url:`/post/${t}/${e}/${i}/${n}`})}var r=i(133),h=i(2428),d=i(535),u=i(6356),c={name:"blogPage",components:{TagsModule:u.Z,AllTagsModule:d.Z,TagItem:h.Z,BasePage:o.Z},data(){return{year:"",month:"",day:"",name:"",titles:[],mdToc:[],postItem:new r.lj({})}},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)},created(){this.year=this.$route.params.year,this.month=this.$route.params.month,this.day=this.$route.params.day,this.name=this.$route.params.name;const t=`/${this.year}/${this.month}/${this.day}/${this.name}`;let e=this.$store.getters.getPost(t);if(console.debug(e),void 0!==e)return this.postItem=e,void this.$nextTick((()=>{this.findTitles()}));a(this.year,this.month,this.day,this.name).then((t=>{console.debug(t),t.data&&(this.postItem=new r.lj(t.data),this.$nextTick((()=>{this.findTitles()})))}))},methods:{handleScroll(){const t=this.$refs.preview.$el.querySelectorAll("h1,h2,h3,h4,h5,h6");let e=null,i=-1/0;for(let n of t){const t=n.getBoundingClientRect(),s=t.top;s<80&&s>i&&(i=s,e=n)}e&&this.highlightTitle(e.innerText)},highlightTitle(t){this.titles=this.titles.map((e=>({...e,highlight:e.title===t})))},findTitles(){this.$nextTick((()=>{const t=this.$refs.preview.$el.querySelectorAll("h1,h2,h3,h4,h5,h6"),e=Array.from(t).filter((t=>!!t.innerText.trim()));if(!e.length)return void(this.titles=[]);const i=Array.from(new Set(e.map((t=>t.tagName)))).sort();this.titles=e.map((t=>({title:t.innerText,lineIndex:t.getAttribute("data-v-md-line"),indent:i.indexOf(t.tagName)}))),console.debug(this.titles),this.titles[0].highlight=!0}))},handleAnchorClick(t){const{lineIndex:e}=t,i=this.$refs.preview.$el.querySelector(`[data-v-md-line="${e}"]`);i&&window.scrollTo({top:i.offsetTop-60,behavior:"smooth"})}}},g=c,p=i(1001),m=(0,p.Z)(g,n,s,!1,null,"0d8ed64a",null),f=m.exports}}]);